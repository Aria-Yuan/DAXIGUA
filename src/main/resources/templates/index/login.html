<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
    <title>登录</title>
    <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1"/>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <link rel="stylesheet" href="../../static/css/login.css" th:href="@{../css/login.css}" />

</head>
<body>

<h2 style="position: center">Modal Login Form</h2>

<p id="user" hidden="true"> woshiyonghum </p>
<!--<button onclick="document.getElementById('id01').style.display='block'" style="width:auto;">Login</button>-->

<div id="id01" class="modal" style="display: block">
  
  <form class="modal-content animate" id="signIn" th:action="@{/login}" method="post" >
    <div class="imgcontainer">
<!--      <span onclick="document.getElementById('id01').style.display='none'" class="close" title="Close Modal">&times;</span>-->
      <img src="../picture/img_0016.jpg" alt="Avatar" class="avatar">
    </div>

    <div class="container">
      <p id="errorMsg" style="color:red;" th:if="${loginError}" class="error">用户名或密码错误，请重试</p>
      	 <label for="username"><table><td><b>QQ</b></td>
             <td><p id="emptyusr" style="color: #f44336;font-size: 11px;padding-left: 6px" hidden="hidden"> 请输入QQ号！</p></td></table></label>
	     <input type="text" id="username" placeholder="请输入QQ号" name="username" autofocus="autofocus">
	
	     <label for="password"><table><td><b>密码</b></td>
             <td><p id="emptypsw" style="color: #f44336;font-size: 11px;padding-left: 6px" hidden="hidden"> 请输入密码！</p></td></table></label>
	     <input type="password" id="password" placeholder="请输入密码" name="password">
	        
	     </br>
	     </br>
	     <button id="checkSubmit" type="submit" value="Log in" onclick="return checkPsw()" th:text="送出"></button>
	      
	     <label style="font-size: 10pt;">
	     <input type="checkbox" checked="checked" name="remember"> 记住我（记不住）
	   </label>
    </div>

    <div class="buttomContainer" style="background-color:#f1f1f1;height:20px">
      <span class="signup">还不是会员? 我要<a href="/register" th:href="@{/register}">注册</a></span>
      <span class="psw">忘记<a href="#">密码?</a></span>
    </div>
  </form>
</div>

<script>
// Get the modal
var modal = document.getElementById('id01');
var phone = document.getElementById('username');
var psw = document.getElementById('password');
var submit = document.getElementById('checkSubmit');

// When the user clicks anywhere outside of the modal, close it
// window.onclick = function(event) {
//     if (event.target == modal) {
//         modal.style.display = "none";
//     }
// }

//
function checkPsw() {

    document.getElementById('emptyusr').hidden=true;
    document.getElementById('emptypsw').hidden=true;

	if(phone.value===''){
	    document.getElementById('emptyusr').hidden=false;
        return false;
    }
	else if(psw.value===''){
        document.getElementById('emptypsw').hidden=false;
        return false;
    }
	else{
        phone.readOnly=true;
        psw.readOnly=true;
        submit.text="登入中...";

        return true;
    }
	// else{
    //
    //     phone.readOnly=true;
    //     psw.readOnly=true;
    //     submit.value="登入中...";
    //     submit.disabled=true;
    //
    //     $.ajax({
    //         cache: true,
    //         type: "POST",
    //         url:"/userSignIn",
    //         data:$('#signIn').serialize(),
    //         async: false,
    //         error: function(request) {
    //             alert("Connection error:"+request.error);
    //         },
    //         success: function(data) {
    //             if(data == "0"){
    //                 document.getElementById('errorMsg').hidden = false;
    //
    //
    //             }else{
    //                 document.getElementById('user').hidden = false;
    //                 document.getElementById('user').innerHtml = data
    //                 modal.style.display = "none";
    //
    //             }
    //         }
    //     });
    // }

}  
</script>


</body>
</html>
